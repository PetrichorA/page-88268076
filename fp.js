const getBrowserFingerprint=({hardwareOnly:e=!1,enableWebgl:t=!1,debug:r=!1}={})=>{const o=+parseInt(window.devicePixelRatio),{appName:a,appCodeName:n,appVersion:i,cookieEnabled:c,deviceMemory:l,doNotTrack:d,hardwareConcurrency:s,language:g,languages:h,maxTouchPoints:u,platform:m,product:p,productSub:f,userAgent:v,vendor:S,vendorSub:A}=window.navigator,{width:x,height:w,colorDepth:b,pixelDepth:E}=window.screen,R=(new Date).getTimezoneOffset(),y=Intl.DateTimeFormat().resolvedOptions().timeZone,T="ontouchstart"in window,_=getCanvasID(r),C=t?getWebglID(r):void 0,I=t?getWebglInfo(r):void 0,N=e?JSON.stringify({canvas:_,colorDepth:b,deviceMemory:l,devicePixelRatio:o,hardwareConcurrency:s,height:w,maxTouchPoints:u,pixelDepth:E,platform:m,touchSupport:T,webgl:C,webglInfo:I,width:x}):JSON.stringify({appCodeName:n,appName:a,appVersion:i,canvas:_,colorDepth:b,cookieEnabled:c,deviceMemory:l,devicePixelRatio:o,doNotTrack:d,hardwareConcurrency:s,height:w,language:g,languages:h,maxTouchPoints:u,pixelDepth:E,platform:m,product:p,productSub:f,timezone:y,timezoneOffset:R,touchSupport:T,userAgent:v,vendor:S,vendorSub:A,webgl:C,webglInfo:I,width:x}),D=JSON.stringify(N,null,4);return r&&console.log("fingerprint data",D),murmurhash3_32_gc(D)};export const getCanvasID=e=>{try{const t=document.createElement("canvas"),r=t.getContext("2d"),o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`~1!2@3#4$5%6^7&8*9(0)-_=+[{]}|;:',<.>/?";r.textBaseline="top",r.font="14px 'Arial'",r.textBaseline="alphabetic",r.fillStyle="#f60",r.fillRect(125,1,62,20),r.fillStyle="#069",r.fillText(o,2,15),r.fillStyle="rgba(102, 204, 0, 0.7)",r.fillText(o,4,17);const a=t.toDataURL();return e?document.body.appendChild(t):r.clearRect(0,0,t.width,t.height),murmurhash3_32_gc(a)}catch{return null}};export const getWebglID=e=>{try{const t=document.createElement("canvas"),r=t.getContext("webgl");t.width=256,t.height=128;const o="attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}",a="precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}",n=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,n);const i=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.7321,0]);r.bufferData(r.ARRAY_BUFFER,i,r.STATIC_DRAW),n.itemSize=3,n.numItems=3;const c=r.createProgram(),l=r.createShader(r.VERTEX_SHADER);r.shaderSource(l,o),r.compileShader(l);const d=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(d,a),r.compileShader(d),r.attachShader(c,l),r.attachShader(c,d),r.linkProgram(c),r.useProgram(c),c.vertexPosAttrib=r.getAttribLocation(c,"attrVertex"),c.offsetUniform=r.getUniformLocation(c,"uniformOffset"),r.enableVertexAttribArray(c.vertexPosArray),r.vertexAttribPointer(c.vertexPosAttrib,n.itemSize,r.FLOAT,!1,0,0),r.uniform2f(c.offsetUniform,1,1),r.drawArrays(r.TRIANGLE_STRIP,0,n.numItems);const s=new Uint8Array(t.width*t.height*4);r.readPixels(0,0,t.width,t.height,r.RGBA,r.UNSIGNED_BYTE,s);const g=JSON.stringify(s).replace(/,?"[0-9]+":/g,"");return e?document.body.appendChild(t):r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT|r.STENCIL_BUFFER_BIT),murmurhash3_32_gc(g)}catch{return null}};export const getWebglInfo=()=>{try{const e=document.createElement("canvas").getContext("webgl");return{VERSION:e.getParameter(e.VERSION),SHADING_LANGUAGE_VERSION:e.getParameter(e.SHADING_LANGUAGE_VERSION),VENDOR:e.getParameter(e.VENDOR),SUPORTED_EXTENSIONS:e.getSupportedExtensions()}}catch{return null}};export const murmurhash3_32_gc=e=>{const t=3&e.length,r=e.length-t,o=3432918353,a=461845907;let n,i,c;for(let t=0;t<r;t++)c=255&e.charCodeAt(t)|(255&e.charCodeAt(++t))<<8|(255&e.charCodeAt(++t))<<16|(255&e.charCodeAt(++t))<<24,++t,c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,n^=c,n=n<<13|n>>>19,i=5*(65535&n)+((5*(n>>>16)&65535)<<16)&4294967295,n=27492+(65535&i)+((58964+(i>>>16)&65535)<<16);const l=r-1;switch(c=0,t){case 3:c^=(255&e.charCodeAt(l+2))<<16;break;case 2:c^=(255&e.charCodeAt(l+1))<<8;break;case 1:c^=255&e.charCodeAt(l)}return c=(65535&c)*o+(((c>>>16)*o&65535)<<16)&4294967295,c=c<<15|c>>>17,c=(65535&c)*a+(((c>>>16)*a&65535)<<16)&4294967295,n^=c,n^=e.length,n^=n>>>16,n=2246822507*(65535&n)+((2246822507*(n>>>16)&65535)<<16)&4294967295,n^=n>>>13,n=3266489909*(65535&n)+((3266489909*(n>>>16)&65535)<<16)&4294967295,n^=n>>>16,n>>>0};window.getBrowserFingerprint=getBrowserFingerprint;export default getBrowserFingerprint;
